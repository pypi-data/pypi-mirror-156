(this.webpackJsonpstreamlit_component_template=this.webpackJsonpstreamlit_component_template||[]).push([[0],{150:function(e,t,n){e.exports=n(348)},347:function(e,t,n){},348:function(e,t,n){"use strict";n.r(t);var a=n(7),s=n.n(a),o=n(148),r=n.n(o),c=n(9),i=n(6),l=n(0),u=n(1),d=n(2),p=n(3),h=n(11),f=n(36),m=n(61),g=n(84),v=["target","source"],b=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).nodeTree=void 0,e.nodeTreeInner=void 0,e.setNodeTree=function(t){e.nodeTree=t},e.setNodeTreeInner=function(t){e.nodeTreeInner=t},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.renderDag()}},{key:"sholudComponentUpdate",value:function(e){return!(this.props.nodes===e.nodes)||!(this.props.edges===e.edges)}},{key:"componentDidUpdate",value:function(){this.renderDag()}},{key:"renderDag",value:function(){var e=this.props,t=e.nodes,n=e.edges,a=e.graph,s=e.onNodeClick,o=e.onNodeHover,r=new g.graphlib.Graph;r.setGraph(Object(i.a)({},a)).setDefaultNodeLabel((function(){return{}})).setDefaultEdgeLabel((function(){return{}})),t.forEach((function(e){r.setNode(e.id,e)})),n.forEach((function(e){var t=e.target,n=e.source,a=Object(f.a)(e,v);r.setEdge(n,t,a)}));var c=m.select(this.nodeTree),l=m.select(this.nodeTreeInner);(new g.render)(l,r),s&&c.selectAll("g.node").on("click",s),o&&c.selectAll("g.node").on("mouseover",o)}},{key:"render",value:function(){var e=this.props,t=e.width,n=e.height;return s.a.createElement("svg",{width:t,height:n,ref:this.setNodeTree},s.a.createElement("g",{ref:this.setNodeTreeInner}))}}]),n}(s.a.Component);b.defaultProps={width:"100%",height:"100%",nodes:{},edges:[],graph:{isMultiGraph:!0},interactive:!1,onNodeClick:function(){}};var y=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"onNodeClick",value:function(e){h.a.setComponentValue({action:"onClickNode",node:e})}},{key:"render",value:function(){var e,t,n,a,o,r,c,l=(null===(e=this.props.args)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.nodes.map((function(e){return Object(i.a)(Object(i.a)({},e),{},{style:"fill: rgb(204, 230, 255);border: solid 1px rgba(0, 0, 0)",shape:"rect"})})))||[{id:0,label:"ReactComponent",style:"fill: rgb(204, 230, 255);border: solid 1px rgba(0, 0, 0)",shape:"rect"},{id:1,label:"props",style:"fill: rgb(204, 230, 255)",shape:"rect"},{id:2,label:"props",style:"fill: rgb(204, 230, 255)",shape:"rect"}],u=(null===(n=this.props.args)||void 0===n||null===(a=n.data)||void 0===a||null===(o=a.edges)||void 0===o?void 0:o.map((function(e){return Object(i.a)(Object(i.a)({},e),{},{style:"stroke: rgb(214, 214, 214);fill: none"})})))||[{target:1,source:0,style:"stroke: rgb(214, 214, 214);fill: none",label:"2333"},{target:2,source:0,style:"stroke: rgb(214, 214, 214);fill: none",label:"2333"}],d=(null===(r=this.props.args)||void 0===r||null===(c=r.data)||void 0===c?void 0:c.graph)||{rankdir:"LR"};return s.a.createElement(b,{nodes:l,edges:u,graph:d,onNodeClick:this.onNodeClick.bind(this)})}}]),n}(h.b),k=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={numClicks:0,isFocused:!1},e.render=function(){var t=e.props.args.data,n=e.props.theme,a={};if(n){var o="1px solid ".concat(e.state.isFocused?n.primaryColor:"gray");a.border=o,a.outline=o}return s.a.createElement("span",null,"Hello, ",t.name,"! \xa0",s.a.createElement("button",{style:a,onClick:e.onClicked,disabled:e.props.disabled,onFocus:e._onFocus,onBlur:e._onBlur},"Click Me!"))},e.onClicked=function(){e.setState((function(e){return{numClicks:e.numClicks+1}}),(function(){return h.a.setComponentValue(e.state.numClicks)}))},e._onFocus=function(){e.setState({isFocused:!0})},e._onBlur=function(){e.setState({isFocused:!1})},e}return Object(u.a)(n)}(h.b),j=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){h.a.setFrameHeight()}},{key:"componentDidUpdate",value:function(){h.a.setFrameHeight()}}]),n}(s.a.PureComponent),O=(n(347),{dagre:y,ClickDemo:k,getUrl:function(){return Object(a.useEffect)((function(){h.a.setComponentValue(window.location.href)}),[]),null},LuckSheet:function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(e){var a;if(Object(l.a)(this,n),(a=t.call(this,e)).cells=[],a.maxRow=0,a.maxCol=0,a.cellUpdated=function(e,t){e>a.maxRow&&(a.maxRow=e),t>a.maxCol&&(a.maxCol=t)},a.cellUpdateBefore=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log(t)},a.onSave=function(){for(var e=window.luckysheet.getLuckysheetfile()[0],t=[],n=e.data,s={},o=0;o<=a.maxCol;o++)a.cells[o]&&"object"===typeof a.cells[o]?t.push(a.cells[o].index):t.push(a.cells[o]||e.data[0][o].v),s[t[o]]={};for(var r=1;r<=a.maxRow;r++)for(var c=0;c<=a.maxCol;c++)n[r][c]&&(s[t[c]][r-1]=n[r][c].v);a.props.dispatch("onSave",{data:s,filter:e.filter})},!window.luckysheet){["https://cdn.jsdelivr.net/npm/luckysheet@latest/dist/plugins/css/pluginsCss.css","https://cdn.jsdelivr.net/npm/luckysheet@latest/dist/plugins/plugins.css","https://cdn.jsdelivr.net/npm/luckysheet@latest/dist/css/luckysheet.css","https://cdn.jsdelivr.net/npm/luckysheet@latest/dist/assets/iconfont/iconfont.css","https://cdn.jsdelivr.net/npm/luckysheet@latest/dist/plugins/js/plugin.js","https://cdn.jsdelivr.net/npm/luckysheet@latest/dist/luckysheet.umd.js"].forEach((function(e){if(e.endsWith(".css")){var t=document.createElement("link");t.href=e,t.rel="stylesheet",document.body.append(t)}else{var n=document.createElement("script");n.src=e,n.type="text/javascript",document.body.append(n)}}))}return a}return Object(u.a)(n,[{key:"componentWillReceiveProps",value:function(e){if(e.messageData.data!==this.props.messageData.data){var t=e.messageData.data.data;Object.keys(t).forEach((function(e,n){window.luckysheet.setCellValue(0,n,e),Object.keys(t[e]).forEach((function(a){window.luckysheet.setCellValue(+a+1,n,t[e][a])}))}))}}},{key:"createSheet",value:function(){var e=this;if(window.luckysheet){var t=[],n=this.props.messageData.data||this.props.args.data||{},a=n.data,s=n.cells;a&&(a=JSON.parse(a),s||(s=Object.keys(a)),s.forEach((function(n,s){var o="string"===typeof n?n:n.index,r=a[o];Object.keys(r).forEach((function(n){t.push({r:+n+1,c:s,v:r[n]}),+n+1>e.maxRow&&(e.maxRow=+n+1)}))}))),s&&(this.cells=s,this.maxCol=s.length-1,s.forEach((function(e,n){t.push({r:0,c:n,v:"string"===typeof e?e:{v:e.name}})}))),window.luckysheet.create({container:"luckysheet-container",showtoolbar:!0,data:[{name:"Sheet1",color:"",status:"1",order:"0",celldata:t,config:{},index:0,row:this.maxRow+10,column:this.maxCol+10}],hook:{cellUpdated:this.cellUpdated,cellUpdateBefore:this.cellUpdateBefore}}),h.a.setFrameHeight(600)}else setTimeout((function(){e.createSheet()}),1e3)}},{key:"componentDidMount",value:function(){this.createSheet()}},{key:"render",value:function(){return s.a.createElement("div",{className:"lucksheet_box"},s.a.createElement("div",null,s.a.createElement("button",{onClick:this.onSave,style:{marginRight:6}},"\u4fdd\u5b58")),s.a.createElement("div",{id:"luckysheet-container",style:{margin:"0px",padding:"0px",width:"100%",height:"100%"}}))}}]),n}(j),Pandas:function(e){return Object(a.useEffect)((function(){h.a.setFrameHeight(0)}),[]),Object(a.useEffect)((function(){if(e.messageData.data){var t=new Function("data",e.args.data.fn)(e.messageData.data);e.dispatch("onSave",t)}}),[e.messageData.data]),null}}),w=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={messageData:{}},e.dispatch=function(t,n){var a,s=((null===(a=e.props.args.events)||void 0===a?void 0:a.dispatchs)||[]).filter((function(e){return e.action===t}));s.length>0?s.forEach((function(e){window.parent.postMessage({type:"component-message-dispatch",data:n,key:e.out},"*")})):h.a.setComponentValue({action:t,data:n})},e.render=function(){var t=e.props.args.componentName,n=O[t];return n?s.a.createElement(n,Object.assign({},e.props,{dispatch:e.dispatch,messageData:e.state.messageData})):s.a.createElement("div",null,t,"\u7ec4\u4ef6\u4e0d\u5b58\u5728")},e}return Object(u.a)(n,[{key:"componentWillMount",value:function(){this.props.args.events&&(console.log(this.props.args),this.props.args.events.listerens&&(window.parent.postMessage({type:"component-message-listeren"},"*"),window.addEventListener("message",this.onMessage.bind(this))))}},{key:"sholudComponentUpdate",value:function(e){return!(this.props.args===e.args)}},{key:"onMessage",value:function(e){var t=this,n=e.data.key;this.props.args.events.listerens.forEach((function(a){n===a.key&&t.setState({messageData:Object(i.a)(Object(i.a)({},t.state.messageData),{},Object(c.a)({},a.out||a.key,e.data.data))})}))}},{key:"setComponentValue",value:function(e){h.a.setComponentValue(e)}}]),n}(h.b),C=Object(h.c)(w);r.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(C,null)),document.getElementById("root"))}},[[150,1,2]]]);
//# sourceMappingURL=main.a1916e52.chunk.js.map