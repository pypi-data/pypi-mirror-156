"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[548],{6771:function(e,n,t){t.d(n,{Z:function(){return w}});var r=t(5893),o=t(7294),i=t(1163),u=t(9008),a=t.n(u),c=t(8298),l=t(2734),s=t(2293),f=t(9520),d=t(155),m=t(6886),p=t(3321),y=t(5861),v=t(7357);function h(e){var n=e.children,t=(0,c.Z)({disableHysteresis:!0,threshold:24});return(0,o.cloneElement)(n,{elevation:t?4:0})}var b=function(){var e=(0,o.useState)(!1),n=e[0],t=e[1],i=((0,o.useCallback)((function(){t(!n)}),[n]),(0,l.Z)());return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(h,{children:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.Z,{color:"transparent",elevation:0,children:(0,r.jsx)(f.Z,{maxWidth:"xl",sx:{padding:0},children:(0,r.jsx)(d.Z,{sx:{minHeight:50,maxHeight:50,padding:0,flex:1,alignItems:"center",justifyContent:"space-between",display:"flex",flexWrap:"nowrap"},children:(0,r.jsx)(m.ZP,{item:!0,children:(0,r.jsx)(p.Z,{href:"https://system-bridge.timmo.dev",target:"_blank",children:(0,r.jsx)(y.Z,{component:"div",variant:"h4",sx:{textTransform:"none",userSelect:"none",color:i.palette.primary.contrastText},children:"System Bridge"})})})})})}),(0,r.jsx)(v.Z,{sx:{height:i.spacing(18)}})]})})})};function g(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function x(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){g(e,n,t[n])}))}return e}var j=!1;var w=function(e){var n=(0,i.useRouter)();return(0,o.useEffect)((function(){if(n.isReady&&!j){var e,t,r,o;j=!0;var i=(null===(e=n.query)||void 0===e?void 0:e.apiKey)||"",u=(null===(t=n.query)||void 0===t?void 0:t.apiPort)||"9170",a=!1;if((null===(r=n.query)||void 0===r?void 0:r.apiKey)||(a=!0,i=window.prompt("Please enter your API key",i)),(null===(o=n.query)||void 0===o?void 0:o.apiPort)||(a=!0,u=window.prompt("Please enter your API port (default: 9170)",u)),a&&i&&u){var c=n.asPath.split("?")[0];n.replace({pathname:c.includes(".html")?c:"".concat(c,".html"),query:x({},n.query,{apiKey:i,apiPort:u})})}}}),[n]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(a(),{children:[(0,r.jsx)("title",{children:e.title?"".concat(e.title," - System Bridge"):"System Bridge"}),(0,r.jsx)("link",{rel:"canonical",href:e.url}),(0,r.jsx)("meta",{name:"description",content:e.description?"".concat(e.description):e.title?"".concat(e.title," - System Bridge"):"System Bridge"}),(0,r.jsx)("meta",{name:"keywords",content:e.keywords?"".concat(e.keywords):"system-bridge, system, bridge, typescript"})]}),!e.noHeader&&(0,r.jsx)(b,{}),e.children]})}},6317:function(e,n,t){t.d(n,{D:function(){return i},X:function(){return o}});var r=t(7294);function o(e){navigator.permissions.query({name:"clipboard-write"}).then((function(n){"granted"!==n.state&&"prompt"!==n.state||navigator.clipboard.writeText(e)}))}function i(e){var n=(0,r.useRef)();return(0,r.useEffect)((function(){n.current=e})),n.current}},9773:function(e,n,t){t.d(n,{Z:function(){return T}});var r=t(5893),o=t(7294),i=t(880),u=t(6486),a=t(7467),c=t(6317),l=t(2734),s=t(6886),f=t(7357),d=t(2022),m=t(6628),p=t(5861),y=t(3946),v=t(9411),h=t(8849),b=t(5317),g=t(381),x=t.n(g),j=t(6310);function w(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function S(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function P(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){S(e,n,t[n])}))}return e}function Z(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,i=[],u=!0,a=!1;try{for(t=t.call(e);!(u=(r=t.next()).done)&&(i.push(r.value),!n||i.length!==n);u=!0);}catch(c){a=!0,o=c}finally{try{u||null==t.return||t.return()}finally{if(a)throw o}}return i}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return w(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return w(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var k=function(){var e=function(){w(!0)},n=function(){T&&Y(T)},t=Z((0,a.nn)(),2),i=t[0],u=t[1],c=(0,o.useState)(!1),g=c[0],w=c[1],S=Z((0,a.XI)(),2),k=S[0],C=S[1],O=(0,o.useRef)(null),A=(0,o.useMemo)((function(){return i}),[i]),I=A.duration,E=A.playing,M=A.muted,D=A.loaded,T=A.position,q=A.volume,U=(0,o.useMemo)((function(){return"".concat((100*q).toFixed(0),"%")}),[q]),R=(0,o.useMemo)((function(){var e=x().duration(T,"seconds");return"".concat(e.minutes().toString().padStart(2,"0"),":").concat(e.seconds().toString().padStart(2,"0"))}),[T]),F=(0,o.useMemo)((function(){var e=x().duration(I,"seconds");return"".concat(e.minutes().toString().padStart(2,"0"),":").concat(e.seconds().toString().padStart(2,"0"))}),[I]),L=(0,o.useMemo)((function(){return i.source}),[i]),_=L.artist,z=L.album,B=L.cover,K=L.source,W=L.title,H=(0,o.useCallback)((function(e){u(P({},i,{loaded:e}))}),[i,u]),$=(0,o.useCallback)((function(e){u(P({},i,{playing:e}))}),[i,u]),N=(0,o.useCallback)((function(){$(!E)}),[E,$]),X=(0,o.useCallback)((function(e){u(P({},i,{muted:e}))}),[i,u]),G=(0,o.useCallback)((function(){X(!M)}),[M,X]),J=(0,o.useCallback)((function(e,n){var t="down"===n?q-e:"up"===n?q+e:e;t>1&&(t=1),t<0&&(t=0),u(P({},i,{volume:t})),M&&X(!1)}),[M,q,i,u,X]),Q=(0,o.useCallback)((function(e){u(P({},i,{duration:e}))}),[i,u]),V=(0,o.useCallback)((function(e){I&&e>I&&(e=I),e<0&&(e=0),u(P({},i,{position:e}))}),[i,I,u]),Y=(0,o.useCallback)((function(e){var n;E||$(!0),w(!1),null===(n=O.current)||void 0===n||n.seekTo(e)}),[E,$]);(0,o.useEffect)((function(){D||H(!0)}),[D,H,$]);var ee=(0,l.Z)();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(j.Z,{ref:O,height:"0px",width:"0px",muted:M,playing:E,url:K,volume:q,onDuration:function(e){g||Q(e)},onPause:function(){return $(!1)},onPlay:function(){return $(!0)},onStart:function(){return $(!0)},onProgress:function(e){var n=e.playedSeconds;return V(n)}}),(0,r.jsxs)(s.ZP,{container:!0,direction:"row",alignItems:"center",justifyItems:"center",wrap:"nowrap",sx:{height:140,width:540,overflow:"hidden"},children:[(0,r.jsx)(s.ZP,{item:!0,sx:{width:140,margin:ee.spacing(0,1,0,0)},children:(0,r.jsx)(f.Z,{ref:k,children:(0,r.jsxs)(d.Z,{"aria-label":E?"Pause":"Play",onClick:N,children:[(0,r.jsx)("img",{alt:"".concat(_," - ").concat(z),src:B||"https://raw.githubusercontent.com/timmo001/system-bridge/master/resources/system-bridge-dimmed.svg",width:140}),(0,r.jsx)(m.Z,{in:!!C,timeout:{enter:200,exit:400},children:(0,r.jsx)(f.Z,{sx:{position:"absolute",display:"flex",height:"100%",width:"100%",zIndex:100},children:(0,r.jsx)(h.Icon,{id:E?"pause":"play",path:E?b.Wa1:b._86,size:6,style:{position:"relative",margin:"auto"}})})})]})})}),(0,r.jsx)(s.ZP,{item:!0,xs:!0,children:(0,r.jsxs)(s.ZP,{container:!0,direction:"column",alignItems:"flex-start",justifyItems:"space-around",children:[(0,r.jsx)(s.ZP,{item:!0,children:(0,r.jsxs)(p.Z,{color:"textPrimary",component:"span",variant:"subtitle1",noWrap:!0,children:[_," - ",W]})}),(0,r.jsx)(s.ZP,{item:!0,children:(0,r.jsx)(p.Z,{color:"textSecondary",component:"span",variant:"subtitle2",noWrap:!0,children:z})}),(0,r.jsxs)(s.ZP,{item:!0,container:!0,alignContent:"center",children:[(0,r.jsx)(s.ZP,{item:!0,xs:4}),(0,r.jsx)(s.ZP,{sx:{margin:ee.spacing(0,1,0,0)},item:!0,children:(0,r.jsx)(y.Z,{size:"small",onClick:G,children:M?(0,r.jsx)(h.Icon,{id:"mute",path:b.PLS,size:1.25}):(0,r.jsx)(h.Icon,{id:"unmute",path:b.dw,size:1.25})})}),(0,r.jsx)(s.ZP,{sx:{margin:ee.spacing(.6,2,0,0)},item:!0,xs:!0,children:(0,r.jsx)(v.ZP,{min:0,max:1,step:.01,value:q,onChange:function(e,n){"number"===typeof n&&J(n)}})}),(0,r.jsx)(s.ZP,{sx:{margin:ee.spacing(.9,q>=1?1:2,0,0)},item:!0,children:(0,r.jsx)(p.Z,{component:"span",variant:"body2",children:U})})]}),(0,r.jsxs)(s.ZP,{container:!0,children:[(0,r.jsx)(s.ZP,{sx:{margin:ee.spacing(.25,2,0,0)},item:!0,children:(0,r.jsx)(p.Z,{component:"span",variant:"body2",children:R})}),(0,r.jsx)(s.ZP,{sx:{margin:ee.spacing(0,2,0,0)},item:!0,xs:!0,children:(0,r.jsx)(v.ZP,{min:0,max:I,step:.1,value:T,valueLabelDisplay:"off",onMouseDown:e,onKeyDown:e,onChange:function(e,n){"number"===typeof n&&V(n)},onMouseUp:n,onKeyUp:n})}),(0,r.jsx)(s.ZP,{sx:{margin:ee.spacing(.25,1,0,0)},item:!0,children:(0,r.jsx)(p.Z,{component:"span",variant:"body2",children:F})})]})]})})]})]})};function C(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function O(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function A(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){O(e,n,t[n])}))}return e}function I(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,i=[],u=!0,a=!1;try{for(t=t.call(e);!(u=(r=t.next()).done)&&(i.push(r.value),!n||i.length!==n);u=!0);}catch(c){a=!0,o=c}finally{try{u||null==t.return||t.return()}finally{if(a)throw o}}return i}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return C(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return C(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var E=function(){var e=I((0,a.nn)(),2),n=e[0],t=e[1],i=(0,o.useRef)(null),u=(0,o.useMemo)((function(){return n}),[n]),c=u.duration,l=u.playing,s=u.muted,f=u.loaded,d=u.volume,m=(0,o.useMemo)((function(){return n.source}),[n]).source,p=(0,o.useCallback)((function(e){t(A({},n,{loaded:e}))}),[n,t]),y=(0,o.useCallback)((function(e){return t(A({},n,{playing:e}))}),[n,t]),v=(0,o.useCallback)((function(e){return t(A({},n,{duration:e}))}),[n,t]),h=(0,o.useCallback)((function(e){c&&e>c&&(e=c),e<0&&(e=0),t(A({},n,{position:e}))}),[n,c,t]);return(0,o.useEffect)((function(){f||p(!0)}),[f,p,y]),(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(j.Z,{controls:!0,pip:!0,ref:i,playing:l,height:"100%",width:"100%",style:{margin:0,overflow:"hidden"},url:m,muted:s,volume:d,onDuration:function(e){return v(e)},onPause:function(){return y(!1)},onPlay:function(){return y(!0)},onStart:function(){return y(!0)},onProgress:function(e){var n=e.playedSeconds;return h(n)}})})};function M(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function D(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,i=[],u=!0,a=!1;try{for(t=t.call(e);!(u=(r=t.next()).done)&&(i.push(r.value),!n||i.length!==n);u=!0);}catch(c){a=!0,o=c}finally{try{u||null==t.return||t.return()}finally{if(a)throw o}}return i}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return M(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return M(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var T=function(e){var n=e.playerType,t=(e.entered,D((0,a.nn)(),2)),l=t[0],s=t[1],f=(0,c.D)(l),d=(0,i.useRouter)(),m=d.query;(0,o.useEffect)((function(){if(!l&&d.isReady){var e=Number(m.volume);switch(n){default:break;case"audio":var t;s({muted:!1,playing:"true"===(null===(t=m.autoplay)||void 0===t?void 0:t.toLowerCase()),loaded:!1,position:0,duration:1,source:{type:"audio",source:m.url,album:m.album||"Unknown Album",artist:m.artist||"Unknown Aritst",cover:m.cover,title:m.title||"Unknown Title",volumeInitial:(e>0?e:40)/100},volume:(e>0?e:40)/100});break;case"video":s({muted:!1,playing:!1,loaded:!1,position:0,duration:1,source:{type:"video",source:String(m.url),volumeInitial:(e>0?e:40)/100},volume:(e>0?e:40)/100})}}}),[l,s,n,d,m]),(0,o.useEffect)((function(){if(l){var e;f&&"audio"===(e=(0,u.cloneDeep)(f)).source.type&&delete e.source.cover;var n=(0,u.cloneDeep)(l);"audio"===n.source.type&&delete n.source.cover,(0,u.isEqual)(n,e)||console.log("Player update\n\npreviousStatus:",e,"\nnewStatus:",n)}}),[l,f]);var p=(0,o.useMemo)((function(){if(l)return l.source.type}),[l]);return(0,r.jsx)(r.Fragment,{children:"audio"===p?(0,r.jsx)(k,{}):"video"===p?(0,r.jsx)(E,{}):""})}},7467:function(e,n,t){t.d(n,{I0:function(){return l},XI:function(){return f},nn:function(){return s}});var r=t(5893),o=t(7294);function i(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function u(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,i=[],u=!0,a=!1;try{for(t=t.call(e);!(u=(r=t.next()).done)&&(i.push(r.value),!n||i.length!==n);u=!0);}catch(c){a=!0,o=c}finally{try{u||null==t.return||t.return()}finally{if(a)throw o}}return i}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return i(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return i(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var a=(0,o.createContext)(void 0),c=(0,o.createContext)(null),l=function(e){var n=e.children,t=(0,o.useState)(),i=t[0],u=t[1];return(0,r.jsx)(c.Provider,{value:u,children:(0,r.jsx)(a.Provider,{value:i,children:n})})},s=function(){var e=(0,o.useContext)(a),n=(0,o.useContext)(c);if(null===n)throw new Error;return[e,n]};function f(){var e=u(o.useState(!1),2),n=e[0],t=e[1],r=o.useCallback((function(){return t(!0)}),[]),i=o.useCallback((function(){return t(!1)}),[]),a=o.useRef();return[o.useCallback((function(e){a.current&&(a.current.removeEventListener("mouseover",r),a.current.removeEventListener("mouseout",i)),a.current=e,a.current&&(a.current.addEventListener("mouseover",r),a.current.addEventListener("mouseout",i))}),[r,i]),n]}}}]);