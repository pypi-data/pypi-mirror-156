(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[433],{8792:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/app/data",function(){return n(2525)}])},6771:function(e,t,n){"use strict";n.d(t,{Z:function(){return k}});var r=n(5893),i=n(7294),o=n(1163),s=n(9008),a=n.n(s),c=n(8298),u=n(2734),l=n(2293),d=n(9520),p=n(155),f=n(6886),h=n(3321),y=n(5861),m=n(7357);function v(e){var t=e.children,n=(0,c.Z)({disableHysteresis:!0,threshold:24});return(0,i.cloneElement)(t,{elevation:n?4:0})}var g=function(){var e=(0,i.useState)(!1),t=e[0],n=e[1],o=((0,i.useCallback)((function(){n(!t)}),[t]),(0,u.Z)());return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(v,{children:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.Z,{color:"transparent",elevation:0,children:(0,r.jsx)(d.Z,{maxWidth:"xl",sx:{padding:0},children:(0,r.jsx)(p.Z,{sx:{minHeight:50,maxHeight:50,padding:0,flex:1,alignItems:"center",justifyContent:"space-between",display:"flex",flexWrap:"nowrap"},children:(0,r.jsx)(f.ZP,{item:!0,children:(0,r.jsx)(h.Z,{href:"https://system-bridge.timmo.dev",target:"_blank",children:(0,r.jsx)(y.Z,{component:"div",variant:"h4",sx:{textTransform:"none",userSelect:"none",color:o.palette.primary.contrastText},children:"System Bridge"})})})})})}),(0,r.jsx)(m.Z,{sx:{height:o.spacing(18)}})]})})})};function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){b(e,t,n[t])}))}return e}var x=!1;var k=function(e){var t=(0,o.useRouter)();return(0,i.useEffect)((function(){if(t.isReady&&!x){var e,n,r,i;x=!0;var o=(null===(e=t.query)||void 0===e?void 0:e.apiKey)||"",s=(null===(n=t.query)||void 0===n?void 0:n.apiPort)||"9170",a=!1;if((null===(r=t.query)||void 0===r?void 0:r.apiKey)||(a=!0,o=window.prompt("Please enter your API key",o)),(null===(i=t.query)||void 0===i?void 0:i.apiPort)||(a=!0,s=window.prompt("Please enter your API port (default: 9170)",s)),a&&o&&s){var c=t.asPath.split("?")[0];t.replace({pathname:c.includes(".html")?c:"".concat(c,".html"),query:w({},t.query,{apiKey:o,apiPort:s})})}}}),[t]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(a(),{children:[(0,r.jsx)("title",{children:e.title?"".concat(e.title," - System Bridge"):"System Bridge"}),(0,r.jsx)("link",{rel:"canonical",href:e.url}),(0,r.jsx)("meta",{name:"description",content:e.description?"".concat(e.description):e.title?"".concat(e.title," - System Bridge"):"System Bridge"}),(0,r.jsx)("meta",{name:"keywords",content:e.keywords?"".concat(e.keywords):"system-bridge, system, bridge, typescript"})]}),!e.noHeader&&(0,r.jsx)(g,{}),e.children]})}},9375:function(e,t,n){"use strict";n.d(t,{C:function(){return a}});var r=n(4051),i=n.n(r);function o(e,t,n,r,i,o,s){try{var a=e[o](s),c=a.value}catch(u){return void n(u)}a.done?t(c):Promise.resolve(c).then(r,i)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var s=e.apply(t,n);function a(e){o(s,r,i,a,c,"next",e)}function c(e){o(s,r,i,a,c,"throw",e)}a(void 0)}))}}var a=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.port=t||9170,this.apiKey=n;var o=this;s(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.connect();case 2:o.websocket=e.sent,r&&o.websocket&&o.websocket.readyState===o.websocket.OPEN&&r();case 4:case"end":return e.stop()}}),e)})))()}var t=e.prototype;return t.close=function(){this.websocket&&this.websocket.readyState===this.websocket.OPEN&&this.websocket.close()},t.connect=function(){var e=this;return s(i().mark((function t(){var n;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new WebSocket("ws://".concat(window.location.hostname||"localhost",":").concat(e.port,"/api/websocket")),t.next=3,new Promise((function(e){n.onopen=function(){return e()}}));case 3:return n.onmessage=function(t){if("string"===typeof t.data){var n=JSON.parse(t.data);n&&e.onEvent&&e.onEvent(n)}},t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})))()},t.getData=function(e){this.websocket&&(console.log("Get data:",e),this.websocket.send(JSON.stringify({event:"GET_DATA","api-key":this.apiKey,modules:e})))},t.getSettings=function(){this.websocket&&(console.log("Get settings"),this.websocket.send(JSON.stringify({event:"GET_SETTINGS","api-key":this.apiKey})))},t.registerDataListener=function(e){this.websocket&&(console.log("Register data listener:",e),this.websocket.send(JSON.stringify({event:"REGISTER_DATA_LISTENER","api-key":this.apiKey,modules:e})))},t.sendEvent=function(e){this.websocket&&this.websocket.readyState===this.websocket.OPEN&&this.websocket.send(JSON.stringify({event:"events",data:{"api-key":this.apiKey,data:e}}))},t.updateSetting=function(e,t){this.websocket&&(console.log("Update setting:",{key:e,value:t}),this.websocket.send(JSON.stringify({event:"UPDATE_SETTING","api-key":this.apiKey,setting:e,value:t})))},e}()},2525:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return N}});var r=n(5893),i=n(7294),o=n(9520),s=n(4051),a=n.n(s),c=n(1163),u=n(2734),l=n(6886),d=n(1703),p=n(44),f=n(8456),h=n(6486),y=n(9375),m=n(5152),v=n.n(m),g=n(4267),b=n(5861),w=v()((function(){return n.e(171).then(n.t.bind(n,5171,23))}),{loadableGenerated:{webpack:function(){return[5171]}},ssr:!1});var x=function(e){var t=e.name,n=e.data;return(0,r.jsxs)(g.Z,{children:[(0,r.jsx)(b.Z,{gutterBottom:!0,variant:"h4",component:"h3",children:t}),n?(0,r.jsx)(w,{src:n,displayDataTypes:!1,displayObjectSize:!0,enableClipboard:!0,iconStyle:"triangle",name:null,collapseStringsAfterLength:140,style:{background:"initial",maxWidth:"100%"},theme:"google"}):(0,r.jsx)(l.ZP,{container:!0,direction:"row",justifyContent:"center",children:(0,r.jsx)(f.Z,{})})]})};function k(e,t,n,r,i,o,s){try{var a=e[o](s),c=a.value}catch(u){return void n(u)}a.done?t(c):Promise.resolve(c).then(r,i)}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var S=["battery","bridge","cpu","disk","display","gpu","memory","network","sensors","system"],P={battery:"Battery",bridge:"Bridge",cpu:"CPU",disk:"Disk",display:"Display",gpu:"GPU",memory:"Memory",network:"Network",sensors:"Sensors",system:"System"},E={battery:{},cpu:{},disk:{},memory:{},network:{},sensors:{},system:{}};var O=function(){var e=(0,i.useState)(E),t=e[0],n=e[1],o=(0,i.useState)(!1),s=o[0],m=o[1],v=(0,i.useState)(0),g=v[0],b=v[1],w=(0,c.useRouter)().query,O=(0,i.useCallback)((function(e){console.log("Event:",e),"DATA_UPDATE"===e.type&&(console.log("Data update:",e.module,e.data),n((function(t){var n=(0,h.cloneDeep)(t);return"string"==typeof e.module&&(n[e.module]=e.data),n})))}),[]),Z=(0,i.useCallback)((function(e,t){console.log("Setup WebSocketConnection");var n,r=new y.C(e,t,(n=a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.getData(S),r.registerDataListener(S);case 2:case"end":return e.stop()}}),e)})),function(){var e=this,t=arguments;return new Promise((function(r,i){var o=n.apply(e,t);function s(e){k(o,r,i,s,a,"next",e)}function a(e){k(o,r,i,s,a,"throw",e)}s(void 0)}))}));r.onEvent=O}),[O]);(0,i.useEffect)((function(){!s&&w&&w.apiKey&&(m(!0),Z(Number(w.apiPort)||9170,String(w.apiKey)))}),[s,Z,w]);var N=(0,u.Z)();return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(l.ZP,{container:!0,direction:"column",spacing:2,alignItems:"stretch",sx:{padding:N.spacing(2)},children:(0,r.jsxs)(l.ZP,{container:!0,direction:"row",item:!0,xs:!0,children:[(0,r.jsx)(l.ZP,{item:!0,children:(0,r.jsx)(d.Z,{orientation:"vertical",variant:"scrollable",value:g,onChange:function(e,t){b(t)},children:S.map((function(e,t){return(0,r.jsx)(p.Z,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){j(e,t,n[t])}))}return e}({label:P[e]},function(e){return{id:"scrollable-auto-tab-".concat(e),"aria-controls":"scrollable-auto-tabpanel-".concat(e)}}(t)),t)}))})}),(0,r.jsx)(l.ZP,{item:!0,xs:!0,children:S.map((function(e,n){return(0,r.jsx)(i.Fragment,{children:g===n?(0,r.jsx)(r.Fragment,{children:t[e]?(0,r.jsx)(x,{data:t[e],name:P[e]}):(0,r.jsx)(l.ZP,{container:!0,direction:"row",justifyContent:"center",sx:{margin:N.spacing(8,0,14)},children:(0,r.jsx)(f.Z,{})})}):""},n)}))})]})})})},Z=n(6771);var N=function(){return(0,r.jsx)(Z.Z,{title:"Data",url:"https://system-bridge.timmo.dev",description:"Frontend for System Bridge",children:(0,r.jsx)(o.Z,{component:"article",maxWidth:"xl",children:(0,r.jsx)(O,{})})})}}},function(e){e.O(0,[662,291,316,716,774,888,179],(function(){return t=8792,e(e.s=t);var t}));var t=e.O();_N_E=t}]);