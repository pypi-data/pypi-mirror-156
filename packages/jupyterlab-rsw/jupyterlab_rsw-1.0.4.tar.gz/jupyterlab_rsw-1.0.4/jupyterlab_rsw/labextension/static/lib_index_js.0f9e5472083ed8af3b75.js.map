{"version":3,"file":"lib_index_js.0f9e5472083ed8af3b75.js","mappings":";;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACA;AACP;AACO;AACA;;;;;;;;;;;;;;;;;;;ACbP;AACA;AACA;AACA;AACA;AACA;AAC+C;AACS;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACO,kDAAkD;AACzD;AACA,qBAAqB,+EAA6B;AAClD,uBAAuB,8DAAW;AAClC;AACA;AACA,qBAAqB,8EAA4B;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,gFAA8B;AAChD;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;ACnCA;AACA;AACA;AACA;AACA;AACA;AACgD;AACO;AACL;AACF;AACO;AACH;AACI;AACxD;AACA,wBAAwB,8DAAO;AAC/B;AACA,YAAY,2DAAW;AACvB,CAAC;AACD,6BAA6B,8DAAO;AACpC;AACA,YAAY,iEAAY;AACxB,CAAC;AACD;AACA;AACA;AACA;AACA,0BAA0B,EAAE,KAAK,EAAE,KAAK,EAAE;AAC1C,qBAAqB,+EAA6B;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,sBAAsB,wCAAwC;AAC9D;AACA;AACA;AACA,+BAA+B,mDAAM;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,2CAA2C,SAAS;AACpD;AACA;AACA;AACA,sBAAsB,kDAAK;AAC3B;AACA;AACA,wBAAwB,2DAAsB;AAC9C,mCAAmC,WAAW;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,iEAAe;AAC9B;AACA;AACA,iEAAe,MAAM,EAAC;;;;;;;;;;;;;;;;;;;;ACxEtB;AACA;AACA;AACA;AACA;AACA;AACA;AACmD;AACM;AACzD;AACA;AACA,YAAY,0DAAmB;AAC/B,QAAQ,0DAAmB,aAAa,cAAc;AACtD;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,0DAAmB,CAAC,2CAAQ,IAAI,yFAAyF;AACrI,QAAQ,0DAAmB,QAAQ,6FAA6F;AAChI,YAAY,0DAAmB,SAAS,UAAU;AAClD,gBAAgB,0DAAmB,CAAC,yEAAkB,IAAI,iBAAiB;AAC3E,gBAAgB,0DAAmB,WAAW,8CAA8C;AAC5F,gBAAgB,0DAAmB,WAAW,8CAA8C;AAC5F;AACA;AACA;AACA;AACO,sCAAsC,4CAAS;AACtD;AACA;AACA;AACA;AACA,+DAA+D,0DAAmB,oBAAoB,gBAAgB;AACtH,gBAAgB,0DAAmB,CAAC,2CAAQ;AAC5C,YAAY,0DAAmB,mBAAmB,0BAA0B;AAC5E,YAAY,0DAAmB;AAC/B,gBAAgB,0DAAmB,SAAS,4BAA4B;AACxE;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD;AAChD,mDAAmD;AACnD;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;ACtDA;AACA;AACA;AACA;AACA;AACA;AACA;AAC4D;AACrB;AACqC;AACd;AACnB;AACjB;AAC1B;AACA,WAAW,0DAAmB,CAAC,2DAAS,IAAI,kDAAkD,kBAAkB,0DAAmB,CAAC,6EAAuB,IAAI,kBAAkB;AACjL;AACO,qCAAqC,6DAAW;AACvD;AACA;AACA;AACA,2BAA2B,qDAAM;AACjC;AACA;AACA;AACA;AACA;AACA,QAAQ,oDAAU,CAAC,oDAAY;AAC/B;AACA;AACA;AACA;AACA,uFAAuF,MAAM;AAC7F;AACA,SAAS;AACT,+DAA+D,MAAM;AACrE,SAAS;AACT;AACA;AACA,QAAQ,oDAAU,CAAC,uDAAe;AAClC;AACA;AACA;AACA;AACA;AACA,0DAA0D,4DAAM,sDAAsD,iBAAiB,IAAI,mBAAmB;AAC9J,qBAAqB;AACrB;AACA;AACA;AACA,+FAA+F,SAAS;AACxG;AACA;AACA;AACA,SAAS;AACT,mEAAmE,MAAM;AACzE,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,gBAAgB,0DAAmB,uBAAuB,kDAAkD;AAC5G;AACA;;;;;;;;;;;;;;;ACjFA,iEAAe,6VAA6V,8DAA8D,cAAc,koBAAkoB;;;;;;;;;;;;;;ACA1jC,iEAAe,6VAA6V,ouBAAouB","sources":["webpack://jupyterlab_rsw/./lib/constants.js","webpack://jupyterlab_rsw/./lib/handler.js","webpack://jupyterlab_rsw/./lib/index.js","webpack://jupyterlab_rsw/./lib/proxiedServersComponent.js","webpack://jupyterlab_rsw/./lib/widget.js","webpack://jupyterlab_rsw/./images/rstudio.svg","webpack://jupyterlab_rsw/./images/rstudio_panel.svg"],"sourcesContent":["/*\n * constants.ts\n *\n * Copyright (C) 2022 by RStudio, PBC\n *\n */\n// This file shares variables with './jupyterlab_rsw/constants.py'\n// Changes made to this file may need to be duplicated there.\n// default process names\nexport const kShinyApp = 'Shiny Project';\nexport const kQuartoApp = 'Quarto Project';\n// jupyterlab_rsw server extension endpoints\nexport const kServerEndpoint = 'servers';\nexport const kUrlEndpoint = 'url';\n","/*\n * handler.ts\n *\n * Copyright (C) 2022 by RStudio, PBC\n *\n */\nimport { URLExt } from '@jupyterlab/coreutils';\nimport { ServerConnection } from '@jupyterlab/services';\n/**\n * Call the API extension\n *\n * @param endPoint API REST end point for the extension\n * @param init Initial values for the request\n * @returns The response body interpreted as JSON\n */\nexport async function requestAPI(endPoint = '', init = {}) {\n    // Make request to Jupyter API\n    const settings = ServerConnection.makeSettings();\n    const requestUrl = URLExt.join(settings.baseUrl, 'jupyterlab-rsw', // API Namespace\n    endPoint);\n    let response;\n    response = await ServerConnection.makeRequest(requestUrl, init, settings);\n    let data = await response.text();\n    if (data.length > 0) {\n        try {\n            data = JSON.parse(data);\n        }\n        catch (error) {\n            console.log('Not a JSON response body.', response);\n        }\n    }\n    if (!response.ok) {\n        throw new ServerConnection.ResponseError(response, data.message || data);\n    }\n    return data;\n}\n","/*\n * index.ts\n *\n * Copyright (C) 2022 by RStudio, PBC\n *\n */\nimport rstudioHome from '../images/rstudio.svg';\nimport rstudioPanel from '../images/rstudio_panel.svg';\nimport { RStudioWorkbenchWidget } from './widget';\nimport { Panel, Widget } from '@lumino/widgets';\nimport { ICommandPalette } from '@jupyterlab/apputils';\nimport { LabIcon } from '@jupyterlab/ui-components';\nimport { ServerConnection } from '@jupyterlab/services';\nlet homeUrl = '/home';\nconst rstudioIcon = new LabIcon({\n    name: 'jupyterlab_rsw:home-icon',\n    svgstr: rstudioHome,\n});\nconst rstudioPanelIcon = new LabIcon({\n    name: 'jupyterlab_rsw:panel-icon',\n    svgstr: rstudioPanel,\n});\nfunction returnHome() {\n    location.assign(homeUrl);\n}\nfunction registerCommands(app, palette) {\n    var regex = /(s\\/[\\w]{5}[\\w]{8}[\\w]{8}\\/)/g;\n    const settings = ServerConnection.makeSettings();\n    homeUrl = settings.baseUrl.replace(regex, 'home/');\n    // Register command to return to RStudio Workbench home\n    const command = 'jupyterlab_rsw:return-home';\n    app.commands.addCommand(command, {\n        label: 'Return to RStudio Workbench Home',\n        caption: 'Return to RStudio Workbench Home',\n        execute: returnHome\n    });\n    palette.addItem({ command, category: 'RStudio Workbench' });\n}\nfunction addRStudioIcon(app) {\n    // Add RStudio icon that returns the user to home to menu bar\n    const rstudio_widget = new Widget();\n    rstudio_widget.id = 'rsw-icon';\n    rstudio_widget.node.onclick = returnHome;\n    rstudioIcon.element({\n        container: rstudio_widget.node,\n        justify: 'center',\n        margin: '2px 5px 2px 5px',\n        height: 'auto',\n        width: '20px',\n    });\n    app.shell.add(rstudio_widget, 'top', { rank: 1 });\n}\nfunction addSideBar(app) {\n    // Add the RSW side bar widget to the left panel\n    const panel = new Panel();\n    panel.id = 'RStudio-Workbench-tab';\n    panel.title.icon = rstudioPanelIcon;\n    panel.addWidget(new RStudioWorkbenchWidget());\n    app.shell.add(panel, 'left', { rank: 501 });\n}\nfunction activate(app, palette) {\n    registerCommands(app, palette);\n    addRStudioIcon(app);\n    addSideBar(app);\n}\nconst plugin = {\n    // Initialization data for the jupyterlab_rsw extension.\n    id: 'jupyterlab-rsw',\n    autoStart: true,\n    requires: [ICommandPalette],\n    activate: activate,\n};\nexport default plugin;\n","/*\n * proxiedServersComponent.tsx\n *\n * Copyright (C) 2022 by RStudio, PBC\n *\n */\n// This file shares variables with './jupyterlab_rsw/constants.py'\nimport React, { Component, Fragment } from 'react';\nimport { launcherIcon } from '@jupyterlab/ui-components';\nconst TitleComponent = (props) => {\n    const headerId = ('title_component_' + props.title).replace(/\\s+/g, '_');\n    return (React.createElement(\"div\", null,\n        React.createElement(\"header\", { id: headerId }, props.title)));\n};\nconst ServerComponent = (props) => {\n    const hyperlinkId = 'server_link_' + props.server.html_id;\n    const liId = 'server_component_' + props.server.html_id;\n    const serverNameId = 'server_name_' + props.server.html_id;\n    const serverInfoId = 'server_info_' + props.server.html_id;\n    return (React.createElement(Fragment, { \"aria-role\": 'link', \"aria-label\": 'Open link for proxied server ' + props.server.label },\n        React.createElement(\"a\", { id: hyperlinkId, target: \"_blank\", title: props.server.title, href: props.server.securePath },\n            React.createElement(\"li\", { id: liId },\n                React.createElement(launcherIcon.react, { paddingRight: 5 }),\n                React.createElement(\"span\", { id: serverNameId, className: 'jp-ServerName' }, props.server.label),\n                React.createElement(\"span\", { id: serverInfoId, className: 'jp-ServerInfo' },\n                    props.server.ip,\n                    \":\",\n                    props.server.port)))));\n};\nexport class ProxiedServersComponent extends Component {\n    constructor(props) {\n        super(props);\n    }\n    render() {\n        const serverItems = this.props.servers.map((server) => React.createElement(ServerComponent, { server: server }));\n        return (React.createElement(Fragment, null,\n            React.createElement(TitleComponent, { title: 'Proxied Servers' }),\n            React.createElement(\"div\", null,\n                React.createElement(\"ul\", { id: 'proxied_servers_list' }, serverItems))));\n    }\n}\nexport class Server {\n    constructor(pid, name, port, ip, securePath) {\n        this.pid = pid;\n        this.label = name;\n        this.port = port;\n        this.ip = ip;\n        this.securePath = securePath;\n        this.title = securePath && securePath != '' ? securePath : 'Could not create secure url.';\n        let id_str = this.label + '_' + port;\n        id_str = id_str.replace(/\\s+|-/g, '_'); // replace spaces with an underscore\n        this.html_id = id_str.replace(/_+/g, '_'); // remove any duplicated underscores\n    }\n}\n;\n","/*\n * widget.tsx\n *\n * Copyright (C) 2022 by RStudio, PBC\n *\n */\n// This file shares variables with './jupyterlab_rsw/constants.py'\nimport { kServerEndpoint, kUrlEndpoint } from './constants';\nimport { requestAPI } from './handler';\nimport { ProxiedServersComponent, Server } from './proxiedServersComponent';\nimport { ReactWidget, UseSignal } from '@jupyterlab/apputils';\nimport { Signal } from '@lumino/signaling';\nimport React from 'react';\nfunction UseSignalComponent(props) {\n    return React.createElement(UseSignal, { signal: props.signal, initialArgs: props.servers }, (_, servers) => React.createElement(ProxiedServersComponent, { servers: servers }));\n}\nexport class RStudioWorkbenchWidget extends ReactWidget {\n    constructor() {\n        super();\n        this.servers = new Map();\n        this._signal = new Signal(this);\n        this._serverString = '';\n        this._sessionUrl = '';\n        this.addClass('jp-RStudioWorkbenchWidget');\n    }\n    getSessionUrl() {\n        requestAPI(kUrlEndpoint).then((response) => {\n            try {\n                this._sessionUrl = response.baseSessionUrl;\n            }\n            catch (error) {\n                console.log(`Received invalid response on GET /jupyterlab-rsw/url. \\n${error}`);\n            }\n        }, (error) => {\n            console.log(`Error on GET /jupyterlab-rsw/url. \\n${error}`);\n        });\n    }\n    requestServers() {\n        requestAPI(kServerEndpoint).then((response) => {\n            if (JSON.stringify(response.servers) != this._serverString) {\n                this._serverString = JSON.stringify(response.servers);\n                this.servers.clear();\n                try {\n                    response.servers.forEach((server) => {\n                        this.servers.set(server.pid, [new Server(server.pid, server.label, server.port, server.ip, `${this._sessionUrl}p/${server.secure_port}/`)]);\n                    });\n                    this._signal.emit(this.getServers());\n                }\n                catch (error) {\n                    console.log(`Received invalid response on GET /jupyterlab-rsw/servers. \\n${response}`);\n                    return;\n                }\n            }\n        }, (error) => {\n            console.log(`Error on GET /jupyterlab-rsw/servers. \\n${error}`);\n        });\n    }\n    async onAfterAttach(msg) {\n        super.onAfterAttach(msg);\n        this.requestServers();\n    }\n    async onBeforeShow(msg) {\n        super.onBeforeShow(msg);\n        this.getSessionUrl();\n        this.requestServers();\n        this._timerID = setInterval(() => this.requestServers(), 3000);\n    }\n    onAfterHide(msg) {\n        super.onAfterHide(msg);\n        clearInterval(this._timerID);\n    }\n    getServers() {\n        let serverArray = [];\n        this.servers.forEach((value, key) => {\n            serverArray = serverArray.concat(value);\n        });\n        return serverArray;\n    }\n    render() {\n        return (React.createElement(UseSignalComponent, { signal: this._signal, servers: this.getServers() }));\n    }\n}\n","export default \"<?xml version=\\\"1.0\\\" encoding=\\\"utf-8\\\"?>\\n<!-- Generator: Adobe Illustrator 24.2.1, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->\\n<svg version=\\\"1.1\\\" id=\\\"Layer_1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" x=\\\"0px\\\" y=\\\"0px\\\"\\n\\t viewBox=\\\"0 0 215 215\\\" style=\\\"enable-background:new 0 0 215 215;\\\" xml:space=\\\"preserve\\\">\\n<style type=\\\"text/css\\\">\\n\\t.st0{fill:#75AADB;}\\n</style>\\n<g>\\n\\t<path class=\\\"st0\\\" d=\\\"M129.5,80.4c0-12.1-8.8-16.9-20-16.9c-5.3,0-10.7,0.5-16.4,1.1v33.5l8.3,0.2C121.7,98.6,129.5,90.8,129.5,80.4\\n\\t\\tz\\\"/>\\n\\t<path class=\\\"st0\\\" d=\\\"M107.5,1.5C49,1.5,1.5,49,1.5,107.5s47.5,106,106,106s106-47.5,106-106S166,1.5,107.5,1.5z M155.2,150.2h-17.6\\n\\t\\tl-29.1-43.6H93.1v34.6h15.2v8.9H70.1v-8.9h13.1V64.5l-13.1-1.6v-8.5c5,1.1,9.3,1.9,14.7,1.9c8.1,0,16.4-1.9,24.6-1.9\\n\\t\\tc15.8,0,30.5,7.2,30.5,24.8c0,13.6-8.1,22.2-20.8,25.9l24.6,36.2h11.5V150.2z\\\"/>\\n</g>\\n<g id=\\\"Black_Letters\\\">\\n</g>\\n<g id=\\\"Blue_Gradient_Letters\\\">\\n</g>\\n<g id=\\\"White_Letters\\\">\\n</g>\\n<g id=\\\"R_Ball\\\">\\n</g>\\n</svg>\\n\";","export default \"<?xml version=\\\"1.0\\\" encoding=\\\"utf-8\\\"?>\\n<!-- Generator: Adobe Illustrator 24.2.1, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->\\n<svg version=\\\"1.1\\\" id=\\\"Layer_1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" x=\\\"0px\\\" y=\\\"0px\\\"\\n\\t viewBox=\\\"0 0 215 215\\\" style=\\\"enable-background:new 0 0 215 215;\\\" xml:space=\\\"preserve\\\">\\n<g>\\n\\t<path class=\\\"jp-icon3 jp-icon-selectable\\\" fill=\\\"#616161\\\" d=\\\"M129.5,80.4c0-12.1-8.8-16.9-20-16.9c-5.3,0-10.7,0.5-16.4,1.1v33.5l8.3,0.2C121.7,98.6,129.5,90.8,129.5,80.4\\n\\t\\tz\\\"/>\\n\\t<path class=\\\"jp-icon3 jp-icon-selectable\\\" fill=\\\"#616161\\\" d=\\\"M107.5,1.5C49,1.5,1.5,49,1.5,107.5s47.5,106,106,106s106-47.5,106-106S166,1.5,107.5,1.5z M155.2,150.2h-17.6\\n\\t\\tl-29.1-43.6H93.1v34.6h15.2v8.9H70.1v-8.9h13.1V64.5l-13.1-1.6v-8.5c5,1.1,9.3,1.9,14.7,1.9c8.1,0,16.4-1.9,24.6-1.9\\n\\t\\tc15.8,0,30.5,7.2,30.5,24.8c0,13.6-8.1,22.2-20.8,25.9l24.6,36.2h11.5V150.2z\\\"/>\\n</g>\\n<g id=\\\"Black_Letters\\\">\\n</g>\\n<g id=\\\"Blue_Gradient_Letters\\\">\\n</g>\\n<g id=\\\"White_Letters\\\">\\n</g>\\n<g id=\\\"R_Ball\\\">\\n</g>\\n</svg>\\n\";"],"names":[],"sourceRoot":""}