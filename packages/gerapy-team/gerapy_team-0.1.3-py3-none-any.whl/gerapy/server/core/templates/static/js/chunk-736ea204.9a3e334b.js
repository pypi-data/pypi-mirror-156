(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-736ea204"],{"44cd":function(e,t,n){"use strict";n("dda6")},"7b3c":function(e,t,n){"use strict";n.r(t);var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"panel",attrs:{id:"project-index"}},[n("el-dialog",{staticClass:"dialog",attrs:{visible:e.createProjectDialog,size:"tiny",width:"400px"},on:{"update:visible":function(t){e.createProjectDialog=t}}},[n("el-tabs",{model:{value:e.activeDialogTab,callback:function(t){e.activeDialogTab=t},expression:"activeDialogTab"}},[n("el-tab-pane",{attrs:{label:e.$lang.columns.create,name:"create"}},[n("el-form",[n("el-form-item",{attrs:{label:e.$lang.columns.name,"label-width":"65px"}},[n("el-input",{staticClass:"inline",attrs:{placeholder:e.$lang.columns.name,size:"small"},model:{value:e.projectName,callback:function(t){e.projectName=t},expression:"projectName"}}),n("p",[n("small",[e._v(e._s(e.$lang.messages.createConfigurableProject))])])],1)],1)],1),n("el-tab-pane",{attrs:{label:e.$lang.columns.clone,name:"clone"}},[n("el-form",[n("el-form-item",{attrs:{label:e.$lang.columns.address,"label-width":"65px"}},[n("el-input",{staticClass:"inline",attrs:{placeholder:e.$lang.columns.address,size:"small"},model:{value:e.gitAddress,callback:function(t){e.gitAddress=t},expression:"gitAddress"}}),n("p",[n("small",[e._v(e._s(e.$lang.messages.cloneProjectTips))])]),n("p",[n("small",[e._v(e._s(e.$lang.messages.cloneProjectEg))])])],1)],1)],1),n("el-tab-pane",{attrs:{label:e.$lang.columns.pull,name:"pull"}},[n("el-form",[n("el-form-item",{attrs:{label:e.$lang.columns.address,"label-width":"65px"}},[n("el-input",{staticClass:"inline",attrs:{placeholder:e.$lang.columns.address,size:"small"},model:{value:e.gitAddress,callback:function(t){e.gitAddress=t},expression:"gitAddress"}})],1)],1)],1)],1),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"small"},on:{click:function(t){e.createProjectDialog=!1}}},[e._v(e._s(e.$lang.buttons.cancel)+"\n      ")]),"create"===e.activeDialogTab?n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.onCreateProject()}}},[e._v(e._s(e.$lang.buttons.create)+"\n      ")]):e._e(),"clone"===e.activeDialogTab?n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.onCloneProject()}}},[e._v(e._s(e.$lang.buttons.clone)+"\n      ")]):e._e(),"pull"===e.activeDialogTab?n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.onPulledProject()}}},[e._v(e._s(e.$lang.buttons.pull)+"\n      ")]):e._e()],1)],1),n("panel-title",{attrs:{title:e.$lang.objects.project}},[n("el-button",{attrs:{size:"mini"},on:{click:function(t){return t.stopPropagation(),e.onRefresh.apply(null,arguments)}}},[n("i",{staticClass:"fa fa-refresh"}),e._v("\n      "+e._s(e.$lang.buttons.refresh)+"\n    ")]),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.createProjectDialog=!0}}},[n("i",{staticClass:"fa fa-plus"}),e._v("\n      "+e._s(e.$lang.buttons.create)+"\n    ")])],1),n("div",{staticClass:"panel-body"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],style:{width:"100%;"},attrs:{data:e.projects,"empty-text":e.$lang.messages.noData,"element-loading-text":e.$lang.messages.loading}},[n("el-table-column",{attrs:{align:"center",prop:"name",label:e.$lang.columns.name,width:"150"}}),n("el-table-column",{attrs:{align:"center",label:e.$lang.columns.configurable,width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return e.buildInfos[t.row.name]?[e.buildInfos[t.row.name]["configurable"]?n("span",[n("el-button",{attrs:{type:"success",icon:"el-icon-check",size:"mini",round:""}})],1):n("span",[n("el-button",{attrs:{type:"error",icon:"el-icon-close",size:"mini",round:""}})],1)]:void 0}}],null,!0)}),n("el-table-column",{attrs:{align:"center",label:e.$lang.columns.built,width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return e.buildInfos[t.row.name]?[e.buildInfos[t.row.name]["egg"]?n("span",[n("el-button",{attrs:{type:"success",icon:"el-icon-check",size:"mini",round:""}})],1):n("span",[n("el-button",{attrs:{type:"warning",icon:"el-icon-close",size:"mini",round:""}})],1)]:void 0}}],null,!0)}),n("el-table-column",{attrs:{align:"center",label:e.$lang.columns.builtAt,width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.buildInfos[t.row.name]?n("span",[e._v("\n            "+e._s(e.buildInfos[t.row.name]["built_at"])+"\n          ")]):e._e()]}}])}),n("el-table-column",{attrs:{align:"center",label:e.$lang.columns.description,width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.buildInfos[t.row.name]?n("span",[e._v("\n            "+e._s(e.buildInfos[t.row.name]["description"])+"\n          ")]):e._e()]}}])}),n("el-table-column",{attrs:{align:"center",label:e.$lang.columns.operations},scopedSlots:e._u([{key:"default",fn:function(t){return[e.buildInfos[t.row.name]&&e.buildInfos[t.row.name]["configurable"]?n("router-link",{attrs:{to:{name:"projectConfigure",params:{name:t.row.name}},tag:"span"}},[n("el-button",{attrs:{type:"warning",size:"mini"}},[n("i",{staticClass:"fa fa-edit"}),e._v("\n              "+e._s(e.$lang.buttons.configure)+"\n            ")])],1):n("router-link",{attrs:{to:{name:"projectEdit",params:{name:t.row.name}},tag:"span"}},[n("el-button",{attrs:{type:"warning",size:"mini"}},[n("i",{staticClass:"fa fa-edit"}),e._v("\n              "+e._s(e.$lang.buttons.edit)+"\n            ")])],1),n("router-link",{attrs:{to:{name:"projectDeploy",params:{name:t.row.name}},tag:"span"}},[n("el-button",{attrs:{type:"success",size:"mini"}},[n("i",{staticClass:"fa fa-cloud-upload"}),e._v("\n              "+e._s(e.$lang.buttons.deploy)+"\n            ")])],1),n("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(n){return e.onSingleDelete(t.row.name)}}},[n("i",{staticClass:"fa fa-remove"}),e._v("\n            "+e._s(e.$lang.buttons.delete)+"\n          ")])]}}])})],1)],1)],1)},a=[],l=(n("7f7f"),n("ac6a"),n("eee4")),o={name:"ProjectIndex",data:function(){return{activeDialogTab:"create",createProjectDialog:!1,projectName:null,gitAddress:null,projects:[],loading:!1,buildInfos:{}}},components:{PanelTitle:l["a"]},created:function(){this.getProjectData()},methods:{getBuildInfo:function(e){var t=this;this.$http.get(this.formatString(this.$store.state.url.project.build,{name:e})).then((function(n){var s=n.data;t.$set(t.buildInfos,e,s)}))},getProjectData:function(){var e=this;this.loading=!0,this.$http.get(this.$store.state.url.project.index).then((function(t){var n=t.data;e.projects=n,e.loading=!1,e.projects.forEach((function(t){e.getBuildInfo(t.name)}))})).catch((function(){e.loading=!1}))},onRefresh:function(){this.getProjectData()},onDeleteProject:function(e){var t=this;this.loading=!0,this.$http.post(this.formatString(this.$store.state.url.project.remove,{name:e})).then((function(){t.$message.success(t.$store.getters.$lang.messages.successDelete),t.loading=!1,t.getProjectData()})).catch((function(){t.loading=!1,t.$message.error(t.$store.getters.$lang.messages.errorDelete)}))},onSingleDelete:function(e){var t=this;this.$confirm(this.$store.getters.$lang.messages.confirm,this.$store.getters.$lang.buttons.confirm,{confirmButtonText:this.$store.getters.$lang.buttons.yes,cancelButtonText:this.$store.getters.$lang.buttons.no,type:"warning"}).then((function(){t.onDeleteProject(e)}))},onCloneProject:function(){var e=this;this.$message.success(this.$store.getters.$lang.messages.cloning),this.$http.post(this.$store.state.url.project.clone,{address:this.gitAddress}).then((function(){e.$message.success(e.$store.getters.$lang.messages.successClone),e.loading=!1,e.createProjectDialog=!1,e.onRefresh()})).catch((function(){e.loading=!1,e.$message.error(e.$store.getters.$lang.messages.errorClone)}))},onCreateProject:function(){var e=this;this.$http.post(this.$store.state.url.project.create,{name:this.projectName}).then((function(){e.$message.success(e.$store.getters.$lang.messages.successSave),e.loading=!1,e.$router.push({name:"projectConfigure",params:{name:e.projectName}})})).catch((function(){e.loading=!1,e.$message.error(e.$store.getters.$lang.messages.errorSave)}))},onUploadedProject:function(){this.createProjectDialog=!1,this.onRefresh()},onPulledProject:function(){var e=this;this.$message.success(this.$store.getters.$lang.messages.pulling),this.$http.post(this.$store.state.url.project.pull,{address:this.gitAddress}).then((function(){e.$message.success(e.$store.getters.$lang.messages.successPull),e.loading=!1,e.createProjectDialog=!1,e.onRefresh()})).catch((function(){e.loading=!1,e.$message.error(e.$store.getters.$lang.messages.errorPull)}))}}},r=o,i=(n("44cd"),n("2877")),c=Object(i["a"])(r,s,a,!1,null,null,null);t["default"]=c.exports},dda6:function(e,t,n){},eee4:function(e,t,n){"use strict";var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"panel-title"},[e.title?n("span",{domProps:{textContent:e._s(e.title)}}):e._e(),n("div",{staticClass:"fr"},[e._t("default")],2)])},a=[],l={name:"PanelTitle",props:{title:{type:String}}},o=l,r=n("2877"),i=Object(r["a"])(o,s,a,!1,null,null,null);t["a"]=i.exports}}]);
//# sourceMappingURL=chunk-736ea204.9a3e334b.js.map