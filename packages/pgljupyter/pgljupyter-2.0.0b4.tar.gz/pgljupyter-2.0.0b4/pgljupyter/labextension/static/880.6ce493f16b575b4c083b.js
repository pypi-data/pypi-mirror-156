/*! For license information please see 880.6ce493f16b575b4c083b.js.LICENSE.txt */
"use strict";(self.webpackChunkpgljupyter=self.webpackChunkpgljupyter||[]).push([[880,816],{3645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=e(t);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,i){"string"==typeof e&&(e=[[null,e,""]]);var o={};if(i)for(var s=0;s<this.length;s++){var r=this[s][0];null!=r&&(o[r]=!0)}for(var a=0;a<e.length;a++){var l=[].concat(e[a]);i&&o[l[0]]||(n&&(l[2]?l[2]="".concat(n," and ").concat(l[2]):l[2]=n),t.push(l))}},t}},7408:(e,t,n)=>{n.d(t,{V:()=>o});var i=n(9816);const o=(s=class extends class{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,t,n){this._$Ct=e,this._$AM=t,this._$Ci=n}_$AS(e,t){return this.update(e,t)}update(e,t){return this.render(...t)}}{constructor(e){var t;if(super(e),1!==e.type||"style"!==e.name||(null===(t=e.strings)||void 0===t?void 0:t.length)>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(e){return Object.keys(e).reduce(((t,n)=>{const i=e[n];return null==i?t:t+`${n=n.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${i};`}),"")}update(e,[t]){const{style:n}=e.element;if(void 0===this.ct){this.ct=new Set;for(const e in t)this.ct.add(e);return this.render(t)}this.ct.forEach((e=>{null==t[e]&&(this.ct.delete(e),e.includes("-")?n.removeProperty(e):n[e]="")}));for(const e in t){const i=t[e];null!=i&&(this.ct.add(e),e.includes("-")?n.setProperty(e,i):n[e]=i)}return i.noChange}},(...e)=>({_$litDirective$:s,values:e}));var s},9816:(e,t,n)=>{var i;n.r(t),n.d(t,{_$LH:()=>D,html:()=>_,noChange:()=>T,nothing:()=>O,render:()=>N,svg:()=>E});const o=globalThis.trustedTypes,s=o?o.createPolicy("lit-html",{createHTML:e=>e}):void 0,r=`lit$${(Math.random()+"").slice(9)}$`,a="?"+r,l=`<${a}>`,c=document,h=(e="")=>c.createComment(e),u=e=>null===e||"object"!=typeof e&&"function"!=typeof e,d=Array.isArray,p=e=>{var t;return d(e)||"function"==typeof(null===(t=e)||void 0===t?void 0:t[Symbol.iterator])},m=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,f=/-->/g,v=/>/g,g=/>|[ 	\n\r](?:([^\s"'>=/]+)([ 	\n\r]*=[ 	\n\r]*(?:[^ 	\n\r"'`<>=]|("|')|))|$)/g,b=/'/g,A=/"/g,y=/^(?:script|style|textarea|title)$/i,$=e=>(t,...n)=>({_$litType$:e,strings:t,values:n}),_=$(1),E=$(2),T=Symbol.for("lit-noChange"),O=Symbol.for("lit-nothing"),w=new WeakMap,N=(e,t,n)=>{var i,o;const s=null!==(i=null==n?void 0:n.renderBefore)&&void 0!==i?i:t;let r=s._$litPart$;if(void 0===r){const e=null!==(o=null==n?void 0:n.renderBefore)&&void 0!==o?o:null;s._$litPart$=r=new S(t.insertBefore(h(),e),e,void 0,null!=n?n:{})}return r._$AI(e),r},M=c.createTreeWalker(c,129,null,!1),C=(e,t)=>{const n=e.length-1,i=[];let o,a=2===t?"<svg>":"",c=m;for(let t=0;t<n;t++){const n=e[t];let s,h,u=-1,d=0;for(;d<n.length&&(c.lastIndex=d,h=c.exec(n),null!==h);)d=c.lastIndex,c===m?"!--"===h[1]?c=f:void 0!==h[1]?c=v:void 0!==h[2]?(y.test(h[2])&&(o=RegExp("</"+h[2],"g")),c=g):void 0!==h[3]&&(c=g):c===g?">"===h[0]?(c=null!=o?o:m,u=-1):void 0===h[1]?u=-2:(u=c.lastIndex-h[2].length,s=h[1],c=void 0===h[3]?g:'"'===h[3]?A:b):c===A||c===b?c=g:c===f||c===v?c=m:(c=g,o=void 0);const p=c===g&&e[t+1].startsWith("/>")?" ":"";a+=c===m?n+l:u>=0?(i.push(s),n.slice(0,u)+"$lit$"+n.slice(u)+r+p):n+r+(-2===u?(i.push(void 0),t):p)}const h=a+(e[n]||"<?>")+(2===t?"</svg>":"");if(!Array.isArray(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return[void 0!==s?s.createHTML(h):h,i]};class x{constructor({strings:e,_$litType$:t},n){let i;this.parts=[];let s=0,l=0;const c=e.length-1,u=this.parts,[d,p]=C(e,t);if(this.el=x.createElement(d,n),M.currentNode=this.el.content,2===t){const e=this.el.content,t=e.firstChild;t.remove(),e.append(...t.childNodes)}for(;null!==(i=M.nextNode())&&u.length<c;){if(1===i.nodeType){if(i.hasAttributes()){const e=[];for(const t of i.getAttributeNames())if(t.endsWith("$lit$")||t.startsWith(r)){const n=p[l++];if(e.push(t),void 0!==n){const e=i.getAttribute(n.toLowerCase()+"$lit$").split(r),t=/([.?@])?(.*)/.exec(n);u.push({type:1,index:s,name:t[2],strings:e,ctor:"."===t[1]?j:"?"===t[1]?R:"@"===t[1]?I:L})}else u.push({type:6,index:s})}for(const t of e)i.removeAttribute(t)}if(y.test(i.tagName)){const e=i.textContent.split(r),t=e.length-1;if(t>0){i.textContent=o?o.emptyScript:"";for(let n=0;n<t;n++)i.append(e[n],h()),M.nextNode(),u.push({type:2,index:++s});i.append(e[t],h())}}}else if(8===i.nodeType)if(i.data===a)u.push({type:2,index:s});else{let e=-1;for(;-1!==(e=i.data.indexOf(r,e+1));)u.push({type:7,index:s}),e+=r.length-1}s++}}static createElement(e,t){const n=c.createElement("template");return n.innerHTML=e,n}}function P(e,t,n=e,i){var o,s,r,a;if(t===T)return t;let l=void 0!==i?null===(o=n._$Cl)||void 0===o?void 0:o[i]:n._$Cu;const c=u(t)?void 0:t._$litDirective$;return(null==l?void 0:l.constructor)!==c&&(null===(s=null==l?void 0:l._$AO)||void 0===s||s.call(l,!1),void 0===c?l=void 0:(l=new c(e),l._$AT(e,n,i)),void 0!==i?(null!==(r=(a=n)._$Cl)&&void 0!==r?r:a._$Cl=[])[i]=l:n._$Cu=l),void 0!==l&&(t=P(e,l._$AS(e,t.values),l,i)),t}class H{constructor(e,t){this.v=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}p(e){var t;const{el:{content:n},parts:i}=this._$AD,o=(null!==(t=null==e?void 0:e.creationScope)&&void 0!==t?t:c).importNode(n,!0);M.currentNode=o;let s=M.nextNode(),r=0,a=0,l=i[0];for(;void 0!==l;){if(r===l.index){let t;2===l.type?t=new S(s,s.nextSibling,this,e):1===l.type?t=new l.ctor(s,l.name,l.strings,this,e):6===l.type&&(t=new U(s,this,e)),this.v.push(t),l=i[++a]}r!==(null==l?void 0:l.index)&&(s=M.nextNode(),r++)}return o}m(e){let t=0;for(const n of this.v)void 0!==n&&(void 0!==n.strings?(n._$AI(e,n,t),t+=n.strings.length-2):n._$AI(e[t])),t++}}class S{constructor(e,t,n,i){var o;this.type=2,this._$AH=O,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=n,this.options=i,this._$Cg=null===(o=null==i?void 0:i.isConnected)||void 0===o||o}get _$AU(){var e,t;return null!==(t=null===(e=this._$AM)||void 0===e?void 0:e._$AU)&&void 0!==t?t:this._$Cg}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return void 0!==t&&11===e.nodeType&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=P(this,e,t),u(e)?e===O||null==e||""===e?(this._$AH!==O&&this._$AR(),this._$AH=O):e!==this._$AH&&e!==T&&this.$(e):void 0!==e._$litType$?this.T(e):void 0!==e.nodeType?this.k(e):p(e)?this.S(e):this.$(e)}M(e,t=this._$AB){return this._$AA.parentNode.insertBefore(e,t)}k(e){this._$AH!==e&&(this._$AR(),this._$AH=this.M(e))}$(e){this._$AH!==O&&u(this._$AH)?this._$AA.nextSibling.data=e:this.k(c.createTextNode(e)),this._$AH=e}T(e){var t;const{values:n,_$litType$:i}=e,o="number"==typeof i?this._$AC(e):(void 0===i.el&&(i.el=x.createElement(i.h,this.options)),i);if((null===(t=this._$AH)||void 0===t?void 0:t._$AD)===o)this._$AH.m(n);else{const e=new H(o,this),t=e.p(this.options);e.m(n),this.k(t),this._$AH=e}}_$AC(e){let t=w.get(e.strings);return void 0===t&&w.set(e.strings,t=new x(e)),t}S(e){d(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let n,i=0;for(const o of e)i===t.length?t.push(n=new S(this.M(h()),this.M(h()),this,this.options)):n=t[i],n._$AI(o),i++;i<t.length&&(this._$AR(n&&n._$AB.nextSibling,i),t.length=i)}_$AR(e=this._$AA.nextSibling,t){var n;for(null===(n=this._$AP)||void 0===n||n.call(this,!1,!0,t);e&&e!==this._$AB;){const t=e.nextSibling;e.remove(),e=t}}setConnected(e){var t;void 0===this._$AM&&(this._$Cg=e,null===(t=this._$AP)||void 0===t||t.call(this,e))}}class L{constructor(e,t,n,i,o){this.type=1,this._$AH=O,this._$AN=void 0,this.element=e,this.name=t,this._$AM=i,this.options=o,n.length>2||""!==n[0]||""!==n[1]?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=O}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,t=this,n,i){const o=this.strings;let s=!1;if(void 0===o)e=P(this,e,t,0),s=!u(e)||e!==this._$AH&&e!==T,s&&(this._$AH=e);else{const i=e;let r,a;for(e=o[0],r=0;r<o.length-1;r++)a=P(this,i[n+r],t,r),a===T&&(a=this._$AH[r]),s||(s=!u(a)||a!==this._$AH[r]),a===O?e=O:e!==O&&(e+=(null!=a?a:"")+o[r+1]),this._$AH[r]=a}s&&!i&&this.C(e)}C(e){e===O?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=e?e:"")}}class j extends L{constructor(){super(...arguments),this.type=3}C(e){this.element[this.name]=e===O?void 0:e}}const k=o?o.emptyScript:"";class R extends L{constructor(){super(...arguments),this.type=4}C(e){e&&e!==O?this.element.setAttribute(this.name,k):this.element.removeAttribute(this.name)}}class I extends L{constructor(e,t,n,i,o){super(e,t,n,i,o),this.type=5}_$AI(e,t=this){var n;if((e=null!==(n=P(this,e,t,0))&&void 0!==n?n:O)===T)return;const i=this._$AH,o=e===O&&i!==O||e.capture!==i.capture||e.once!==i.once||e.passive!==i.passive,s=e!==O&&(i===O||o);o&&this.element.removeEventListener(this.name,this,i),s&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var t,n;"function"==typeof this._$AH?this._$AH.call(null!==(n=null===(t=this.options)||void 0===t?void 0:t.host)&&void 0!==n?n:this.element,e):this._$AH.handleEvent(e)}}class U{constructor(e,t,n){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(e){P(this,e)}}const D={L:"$lit$",P:r,V:a,I:1,N:C,R:H,j:p,D:P,H:S,F:L,O:R,W:I,B:j,Z:U},Y=window.litHtmlPolyfillSupport;null==Y||Y(x,S),(null!==(i=globalThis.litHtmlVersions)&&void 0!==i?i:globalThis.litHtmlVersions=[]).push("2.2.4")},3379:(e,t,n)=>{var i,o=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),s=[];function r(e){for(var t=-1,n=0;n<s.length;n++)if(s[n].identifier===e){t=n;break}return t}function a(e,t){for(var n={},i=[],o=0;o<e.length;o++){var a=e[o],l=t.base?a[0]+t.base:a[0],c=n[l]||0,h="".concat(l," ").concat(c);n[l]=c+1;var u=r(h),d={css:a[1],media:a[2],sourceMap:a[3]};-1!==u?(s[u].references++,s[u].updater(d)):s.push({identifier:h,updater:f(d,t),references:1}),i.push(h)}return i}function l(e){var t=document.createElement("style"),i=e.attributes||{};if(void 0===i.nonce){var s=n.nc;s&&(i.nonce=s)}if(Object.keys(i).forEach((function(e){t.setAttribute(e,i[e])})),"function"==typeof e.insert)e.insert(t);else{var r=o(e.insert||"head");if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(t)}return t}var c,h=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function u(e,t,n,i){var o=n?"":i.media?"@media ".concat(i.media," {").concat(i.css,"}"):i.css;if(e.styleSheet)e.styleSheet.cssText=h(t,o);else{var s=document.createTextNode(o),r=e.childNodes;r[t]&&e.removeChild(r[t]),r.length?e.insertBefore(s,r[t]):e.appendChild(s)}}function d(e,t,n){var i=n.css,o=n.media,s=n.sourceMap;if(o?e.setAttribute("media",o):e.removeAttribute("media"),s&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}var p=null,m=0;function f(e,t){var n,i,o;if(t.singleton){var s=m++;n=p||(p=l(t)),i=u.bind(null,n,s,!1),o=u.bind(null,n,s,!0)}else n=l(t),i=d.bind(null,n,t),o=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else o()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===i&&(i=Boolean(window&&document&&document.all&&!window.atob)),i));var n=a(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var i=0;i<n.length;i++){var o=r(n[i]);s[o].references--}for(var l=a(e,t),c=0;c<n.length;c++){var h=r(n[c]);0===s[h].references&&(s[h].updater(),s.splice(h,1))}n=l}}}},2886:(e,t,n)=>{n.d(t,{z:()=>a});var i=n(907);const o={type:"change"},s={type:"start"},r={type:"end"};class a extends i.EventDispatcher{constructor(e,t){super(),void 0===t&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),t===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new i.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:i.MOUSE.ROTATE,MIDDLE:i.MOUSE.DOLLY,RIGHT:i.MOUSE.PAN},this.touches={ONE:i.TOUCH.ROTATE,TWO:i.TOUCH.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return h.phi},this.getAzimuthalAngle=function(){return h.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(e){e.addEventListener("keydown",B),this._domElementKeyEvents=e},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(o),n.update(),l=a.NONE},this.update=function(){const t=new i.Vector3,s=(new i.Quaternion).setFromUnitVectors(e.up,new i.Vector3(0,1,0)),r=s.clone().invert(),f=new i.Vector3,v=new i.Quaternion,g=2*Math.PI;return function(){const e=n.object.position;t.copy(e).sub(n.target),t.applyQuaternion(s),h.setFromVector3(t),n.autoRotate&&l===a.NONE&&N(2*Math.PI/60/60*n.autoRotateSpeed),n.enableDamping?(h.theta+=u.theta*n.dampingFactor,h.phi+=u.phi*n.dampingFactor):(h.theta+=u.theta,h.phi+=u.phi);let i=n.minAzimuthAngle,b=n.maxAzimuthAngle;return isFinite(i)&&isFinite(b)&&(i<-Math.PI?i+=g:i>Math.PI&&(i-=g),b<-Math.PI?b+=g:b>Math.PI&&(b-=g),h.theta=i<=b?Math.max(i,Math.min(b,h.theta)):h.theta>(i+b)/2?Math.max(i,h.theta):Math.min(b,h.theta)),h.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,h.phi)),h.makeSafe(),h.radius*=d,h.radius=Math.max(n.minDistance,Math.min(n.maxDistance,h.radius)),!0===n.enableDamping?n.target.addScaledVector(p,n.dampingFactor):n.target.add(p),t.setFromSpherical(h),t.applyQuaternion(r),e.copy(n.target).add(t),n.object.lookAt(n.target),!0===n.enableDamping?(u.theta*=1-n.dampingFactor,u.phi*=1-n.dampingFactor,p.multiplyScalar(1-n.dampingFactor)):(u.set(0,0,0),p.set(0,0,0)),d=1,!!(m||f.distanceToSquared(n.object.position)>c||8*(1-v.dot(n.object.quaternion))>c)&&(n.dispatchEvent(o),f.copy(n.object.position),v.copy(n.object.quaternion),m=!1,!0)}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",W),n.domElement.removeEventListener("pointerdown",V),n.domElement.removeEventListener("pointercancel",F),n.domElement.removeEventListener("wheel",X),n.domElement.removeEventListener("pointermove",z),n.domElement.removeEventListener("pointerup",Z),null!==n._domElementKeyEvents&&n._domElementKeyEvents.removeEventListener("keydown",B)};const n=this,a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=a.NONE;const c=1e-6,h=new i.Spherical,u=new i.Spherical;let d=1;const p=new i.Vector3;let m=!1;const f=new i.Vector2,v=new i.Vector2,g=new i.Vector2,b=new i.Vector2,A=new i.Vector2,y=new i.Vector2,$=new i.Vector2,_=new i.Vector2,E=new i.Vector2,T=[],O={};function w(){return Math.pow(.95,n.zoomSpeed)}function N(e){u.theta-=e}function M(e){u.phi-=e}const C=function(){const e=new i.Vector3;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),p.add(e)}}(),x=function(){const e=new i.Vector3;return function(t,i){!0===n.screenSpacePanning?e.setFromMatrixColumn(i,1):(e.setFromMatrixColumn(i,0),e.crossVectors(n.object.up,e)),e.multiplyScalar(t),p.add(e)}}(),P=function(){const e=new i.Vector3;return function(t,i){const o=n.domElement;if(n.object.isPerspectiveCamera){const s=n.object.position;e.copy(s).sub(n.target);let r=e.length();r*=Math.tan(n.object.fov/2*Math.PI/180),C(2*t*r/o.clientHeight,n.object.matrix),x(2*i*r/o.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(C(t*(n.object.right-n.object.left)/n.object.zoom/o.clientWidth,n.object.matrix),x(i*(n.object.top-n.object.bottom)/n.object.zoom/o.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function H(e){n.object.isPerspectiveCamera?d/=e:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*e)),n.object.updateProjectionMatrix(),m=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function S(e){n.object.isPerspectiveCamera?d*=e:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/e)),n.object.updateProjectionMatrix(),m=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function L(e){f.set(e.clientX,e.clientY)}function j(e){b.set(e.clientX,e.clientY)}function k(){if(1===T.length)f.set(T[0].pageX,T[0].pageY);else{const e=.5*(T[0].pageX+T[1].pageX),t=.5*(T[0].pageY+T[1].pageY);f.set(e,t)}}function R(){if(1===T.length)b.set(T[0].pageX,T[0].pageY);else{const e=.5*(T[0].pageX+T[1].pageX),t=.5*(T[0].pageY+T[1].pageY);b.set(e,t)}}function I(){const e=T[0].pageX-T[1].pageX,t=T[0].pageY-T[1].pageY,n=Math.sqrt(e*e+t*t);$.set(0,n)}function U(e){if(1==T.length)v.set(e.pageX,e.pageY);else{const t=q(e),n=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);v.set(n,i)}g.subVectors(v,f).multiplyScalar(n.rotateSpeed);const t=n.domElement;N(2*Math.PI*g.x/t.clientHeight),M(2*Math.PI*g.y/t.clientHeight),f.copy(v)}function D(e){if(1===T.length)A.set(e.pageX,e.pageY);else{const t=q(e),n=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);A.set(n,i)}y.subVectors(A,b).multiplyScalar(n.panSpeed),P(y.x,y.y),b.copy(A)}function Y(e){const t=q(e),i=e.pageX-t.x,o=e.pageY-t.y,s=Math.sqrt(i*i+o*o);_.set(0,s),E.set(0,Math.pow(_.y/$.y,n.zoomSpeed)),H(E.y),$.copy(_)}function V(e){!1!==n.enabled&&(0===T.length&&(n.domElement.setPointerCapture(e.pointerId),n.domElement.addEventListener("pointermove",z),n.domElement.addEventListener("pointerup",Z)),function(e){T.push(e)}(e),"touch"===e.pointerType?function(e){switch(G(e),T.length){case 1:switch(n.touches.ONE){case i.TOUCH.ROTATE:if(!1===n.enableRotate)return;k(),l=a.TOUCH_ROTATE;break;case i.TOUCH.PAN:if(!1===n.enablePan)return;R(),l=a.TOUCH_PAN;break;default:l=a.NONE}break;case 2:switch(n.touches.TWO){case i.TOUCH.DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;n.enableZoom&&I(),n.enablePan&&R(),l=a.TOUCH_DOLLY_PAN;break;case i.TOUCH.DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;n.enableZoom&&I(),n.enableRotate&&k(),l=a.TOUCH_DOLLY_ROTATE;break;default:l=a.NONE}break;default:l=a.NONE}l!==a.NONE&&n.dispatchEvent(s)}(e):function(e){let t;switch(e.button){case 0:t=n.mouseButtons.LEFT;break;case 1:t=n.mouseButtons.MIDDLE;break;case 2:t=n.mouseButtons.RIGHT;break;default:t=-1}switch(t){case i.MOUSE.DOLLY:if(!1===n.enableZoom)return;!function(e){$.set(e.clientX,e.clientY)}(e),l=a.DOLLY;break;case i.MOUSE.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enablePan)return;j(e),l=a.PAN}else{if(!1===n.enableRotate)return;L(e),l=a.ROTATE}break;case i.MOUSE.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enableRotate)return;L(e),l=a.ROTATE}else{if(!1===n.enablePan)return;j(e),l=a.PAN}break;default:l=a.NONE}l!==a.NONE&&n.dispatchEvent(s)}(e))}function z(e){!1!==n.enabled&&("touch"===e.pointerType?function(e){switch(G(e),l){case a.TOUCH_ROTATE:if(!1===n.enableRotate)return;U(e),n.update();break;case a.TOUCH_PAN:if(!1===n.enablePan)return;D(e),n.update();break;case a.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;!function(e){n.enableZoom&&Y(e),n.enablePan&&D(e)}(e),n.update();break;case a.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;!function(e){n.enableZoom&&Y(e),n.enableRotate&&U(e)}(e),n.update();break;default:l=a.NONE}}(e):function(e){if(!1!==n.enabled)switch(l){case a.ROTATE:if(!1===n.enableRotate)return;!function(e){v.set(e.clientX,e.clientY),g.subVectors(v,f).multiplyScalar(n.rotateSpeed);const t=n.domElement;N(2*Math.PI*g.x/t.clientHeight),M(2*Math.PI*g.y/t.clientHeight),f.copy(v),n.update()}(e);break;case a.DOLLY:if(!1===n.enableZoom)return;!function(e){_.set(e.clientX,e.clientY),E.subVectors(_,$),E.y>0?H(w()):E.y<0&&S(w()),$.copy(_),n.update()}(e);break;case a.PAN:if(!1===n.enablePan)return;!function(e){A.set(e.clientX,e.clientY),y.subVectors(A,b).multiplyScalar(n.panSpeed),P(y.x,y.y),b.copy(A),n.update()}(e)}}(e))}function Z(e){K(e),0===T.length&&(n.domElement.releasePointerCapture(e.pointerId),n.domElement.removeEventListener("pointermove",z),n.domElement.removeEventListener("pointerup",Z)),n.dispatchEvent(r),l=a.NONE}function F(e){K(e)}function X(e){!1!==n.enabled&&!1!==n.enableZoom&&l===a.NONE&&(e.preventDefault(),n.dispatchEvent(s),function(e){e.deltaY<0?S(w()):e.deltaY>0&&H(w()),n.update()}(e),n.dispatchEvent(r))}function B(e){!1!==n.enabled&&!1!==n.enablePan&&function(e){let t=!1;switch(e.code){case n.keys.UP:P(0,n.keyPanSpeed),t=!0;break;case n.keys.BOTTOM:P(0,-n.keyPanSpeed),t=!0;break;case n.keys.LEFT:P(n.keyPanSpeed,0),t=!0;break;case n.keys.RIGHT:P(-n.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),n.update())}(e)}function W(e){!1!==n.enabled&&e.preventDefault()}function K(e){delete O[e.pointerId];for(let t=0;t<T.length;t++)if(T[t].pointerId==e.pointerId)return void T.splice(t,1)}function G(e){let t=O[e.pointerId];void 0===t&&(t=new i.Vector2,O[e.pointerId]=t),t.set(e.pageX,e.pageY)}function q(e){const t=e.pointerId===T[0].pointerId?T[1]:T[0];return O[t.pointerId]}n.domElement.addEventListener("contextmenu",W),n.domElement.addEventListener("pointerdown",V),n.domElement.addEventListener("pointercancel",F),n.domElement.addEventListener("wheel",X,{passive:!1}),this.update()}}}}]);