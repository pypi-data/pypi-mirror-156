FROM odoo:{{ odoo_version }}
MAINTAINER GRAP, Coop It Easy

# Set User root for installations
USER root

# 1. Make available files in the containers

COPY debian_requirements.txt /debian_requirements.txt

COPY python_requirements.txt /python_requirements.txt

# 2. Install extra debian packages
RUN apt-get update || true &&\
 xargs apt-get install -y --no-install-recommends <debian_requirements.txt

# 3. Install extra Python librairies
RUN {{ python_major_version }}\
 -m pip install -r python_requirements.txt

# Reset to odoo user to run the container
USER odoo
