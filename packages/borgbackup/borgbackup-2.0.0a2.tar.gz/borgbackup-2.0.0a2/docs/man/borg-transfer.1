.\" Man page generated from reStructuredText.
.
.
.nr rst2man-indent-level 0
.
.de1 rstReportMargin
\\$1 \\n[an-margin]
level \\n[rst2man-indent-level]
level margin: \\n[rst2man-indent\\n[rst2man-indent-level]]
-
\\n[rst2man-indent0]
\\n[rst2man-indent1]
\\n[rst2man-indent2]
..
.de1 INDENT
.\" .rstReportMargin pre:
. RS \\$1
. nr rst2man-indent\\n[rst2man-indent-level] \\n[an-margin]
. nr rst2man-indent-level +1
.\" .rstReportMargin post:
..
.de UNINDENT
. RE
.\" indent \\n[an-margin]
.\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
.nr rst2man-indent-level -1
.\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
.in \\n[rst2man-indent\\n[rst2man-indent-level]]u
..
.TH "BORG-TRANSFER" 1 "2022-06-26" "" "borg backup tool"
.SH NAME
borg-transfer \- archives transfer from other repository
.SH SYNOPSIS
.sp
borg [common options] transfer [options]
.SH DESCRIPTION
.sp
This command transfers archives from one repository to another repository.
.sp
Suggested use:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
# initialize DST_REPO reusing key material from SRC_REPO, so that
# chunking and chunk id generation will work in the same way as before.
borg \-\-repo=DST_REPO init \-\-other\-repo=SRC_REPO \-\-encryption=DST_ENC

# transfer archives from SRC_REPO to DST_REPO
borg \-\-repo=DST_REPO transfer \-\-other\-repo=SRC_REPO \-\-dry\-run  # check what it would do
borg \-\-repo=DST_REPO transfer \-\-other\-repo=SRC_REPO            # do it!
borg \-\-repo=DST_REPO transfer \-\-other\-repo=SRC_REPO \-\-dry\-run  # check! anything left?
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
The default is to transfer all archives, including checkpoint archives.
.sp
You could use the misc. archive filter options to limit which archives it will
transfer, e.g. using the \-a option. This is recommended for big
repositories with multiple data sets to keep the runtime per invocation lower.
.SH OPTIONS
.sp
See \fIborg\-common(1)\fP for common options of Borg commands.
.SS optional arguments
.INDENT 0.0
.TP
.B  \-n\fP,\fB  \-\-dry\-run
do not change repository, just check
.TP
.BI \-\-other\-repo \ SRC_REPOSITORY
transfer archives from the other repository
.UNINDENT
.SS Archive filters
.INDENT 0.0
.TP
.BI \-P \ PREFIX\fR,\fB \ \-\-prefix \ PREFIX
only consider archive names starting with this prefix.
.TP
.BI \-a \ GLOB\fR,\fB \ \-\-glob\-archives \ GLOB
only consider archive names matching the glob. sh: rules apply, see "borg help patterns". \fB\-\-prefix\fP and \fB\-\-glob\-archives\fP are mutually exclusive.
.TP
.BI \-\-sort\-by \ KEYS
Comma\-separated list of sorting keys; valid keys are: timestamp, name, id; default is: timestamp
.TP
.BI \-\-first \ N
consider first N archives after other filters were applied
.TP
.BI \-\-last \ N
consider last N archives after other filters were applied
.UNINDENT
.SH EXAMPLES
.INDENT 0.0
.TP
.B ::
# 0. Have borg 2.0 installed on client AND server, have a b12 repo copy for testing.
.sp
# 1. Create a new "related" repository:
# here, the existing borg 1.2 repo used repokey\-blake2 (and aes\-ctr mode),
# thus we use repokey\-blake2\-aes\-ocb for the new borg 2.0 repo.
# staying with the same chunk id algorithm (blake2) and with the same
# key material (via \-\-other\-repo <oldrepo>) will make deduplication work
# between old archives (copied with borg transfer) and future ones.
# the AEAD cipher does not matter (everything must be re\-encrypted and
# re\-authenticated anyway), you could also choose repokey\-blake2\-chacha20\-poly1305.
# in case your old borg repo did not use blake2, just remove the "\-blake2".
$ borg \-\-repo       \fI\%ssh://borg2@borgbackup/./tests/b20\fP rcreate 
.IP "System Message: ERROR/3 (docs/borg-transfer.rst:, line 88)"
Unexpected indentation.
.INDENT 7.0
.INDENT 3.5
\-\-other\-repo \fI\%ssh://borg2@borgbackup/./tests/b12\fP \-e repokey\-blake2\-aes\-ocb
.UNINDENT
.UNINDENT
.sp
# 2. Check what and how much it would transfer:
$ borg \-\-repo       \fI\%ssh://borg2@borgbackup/./tests/b20\fP transfer 
.IP "System Message: ERROR/3 (docs/borg-transfer.rst:, line 92)"
Unexpected indentation.
.INDENT 7.0
.INDENT 3.5
\-\-other\-repo \fI\%ssh://borg2@borgbackup/./tests/b12\fP \-\-dry\-run
.UNINDENT
.UNINDENT
.sp
# 3. Transfer (copy) archives from old repo into new repo (takes time and space!):
$ borg \-\-repo       \fI\%ssh://borg2@borgbackup/./tests/b20\fP transfer 
.IP "System Message: ERROR/3 (docs/borg-transfer.rst:, line 96)"
Unexpected indentation.
.INDENT 7.0
.INDENT 3.5
\-\-other\-repo \fI\%ssh://borg2@borgbackup/./tests/b12\fP
.UNINDENT
.UNINDENT
.sp
# 4. Check if we have everything (same as 2.):
$ borg \-\-repo       \fI\%ssh://borg2@borgbackup/./tests/b20\fP transfer 
.IP "System Message: ERROR/3 (docs/borg-transfer.rst:, line 100)"
Unexpected indentation.
.INDENT 7.0
.INDENT 3.5
\-\-other\-repo \fI\%ssh://borg2@borgbackup/./tests/b12\fP \-\-dry\-run
.UNINDENT
.UNINDENT
.UNINDENT
.SH SEE ALSO
.sp
\fIborg\-common(1)\fP
.SH AUTHOR
The Borg Collective
.\" Generated by docutils manpage writer.
.
